<script>
    // 履修状況サマリーコンポーネント
    const Summary = {
        // サマリーの更新
        update: function() {
            const totalCredits = registeredSubjects.reduce((sum, subject) => sum + subject.credits, 0);
            const requiredCount = registeredSubjects.filter(s => s.type === Constants.SUBJECT.TYPES.REQUIRED).length;
            const electiveCount = registeredSubjects.filter(s => s.type === Constants.SUBJECT.TYPES.ELECTIVE).length;
            const progressPercentage = Math.round((totalCredits / Constants.GRADUATION.TOTAL_CREDITS_REQUIRED) * 100);

            document.getElementById(Constants.ELEMENTS.TOTAL_CREDITS).textContent = totalCredits;
            document.getElementById(Constants.ELEMENTS.REQUIRED_SUBJECTS).textContent = requiredCount;
            document.getElementById(Constants.ELEMENTS.ELECTIVE_SUBJECTS).textContent = electiveCount;
            document.getElementById(Constants.ELEMENTS.GRADUATION_PROGRESS).textContent = progressPercentage + '%';
        },

        // 詳細な単位計算（将来の拡張用）
        calculateDetailedStats: function() {
            const stats = {
                totalCredits: 0,
                requiredCredits: 0,
                electiveCredits: 0,
                bySubject: {},
                byGrade: {}
            };

            registeredSubjects.forEach(subject => {
                stats.totalCredits += subject.credits;

                if (subject.type === '必修') {
                    stats.requiredCredits += subject.credits;
                } else {
                    stats.electiveCredits += subject.credits;
                }

                // 教科別集計
                if (!stats.bySubject[subject.subject]) {
                    stats.bySubject[subject.subject] = 0;
                }
                stats.bySubject[subject.subject] += subject.credits;
            });

            return stats;
        }
    };

    // グローバルスコープに登録
    window.Summary = Summary;
    console.log('✅ Summary コンポーネント登録完了');
</script>