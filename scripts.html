<!-- ユーティリティ関数の読み込み -->
<?!= include('utils/constants'); ?>
<?!= include('utils/dataLoader'); ?>

<!-- JavaScriptコンポーネントの読み込み -->
<?!= include('components/studentInfo'); ?>
<?!= include('components/subjectList'); ?>
<?!= include('components/registration'); ?>
<?!= include('components/summary'); ?>
<?!= include('components/tabNavigation'); ?>

<!-- メインアプリケーション -->
<?!= include('main.js'); ?>

<script>
    // グローバル変数（互換性維持のため）
    let studentData = {};
    let subjectData = [];
    let registeredSubjects = [];

    // 旧関数名との互換性維持（段階的移行のため）
    function loadStudentInfo() {
        App.loadStudentData();
    }

    function loadSubjects() {
        App.loadSubjectData();
    }

    function loadRegistrations() {
        App.loadRegistrationData();
    }

    function displayAvailableSubjects() {
        SubjectList.displayAvailable();
    }

    function displayRegisteredSubjects() {
        SubjectList.displayRegistered();
    }

    function updateSummary() {
        Summary.update();
    }

    function registerSubject(subjectId) {
        Registration.register(subjectId);
    }

    function unregisterSubject(subjectId) {
        Registration.unregister(subjectId);
    }

    // 手動リフレッシュ用のグローバル関数
    function refreshData() {
        App.refresh();
    }
</script>