<!-- ユーティリティ関数の読み込み -->
<?!= include('utils/constants'); ?>
<?!= include('utils/dataLoader'); ?>

<!-- JavaScriptコンポーネントの読み込み -->
<?!= include('components/studentInfo'); ?>
<?!= include('components/subjectList'); ?>
<?!= include('components/registration'); ?>
<?!= include('components/summary'); ?>
<?!= include('components/tabNavigation'); ?>

<script>
    // グローバル変数
    let studentData = {};
    let subjectData = [];
    let registeredSubjects = [];

    // ページ読み込み時の初期化
    document.addEventListener('DOMContentLoaded', function() {
        TabNavigation.init();
        StudentInfo.load();
        SubjectList.load();
        Registration.loadRegistrations();
    });

    // 旧関数名との互換性維持（段階的移行のため）
    function loadStudentInfo() {
        StudentInfo.load();
    }

    function loadSubjects() {
        SubjectList.load();
    }

    function loadRegistrations() {
        Registration.loadRegistrations();
    }

    function displayAvailableSubjects() {
        SubjectList.displayAvailable();
    }

    function displayRegisteredSubjects() {
        SubjectList.displayRegistered();
    }

    function updateSummary() {
        Summary.update();
    }

    function registerSubject(subjectId) {
        Registration.register(subjectId);
    }

    function unregisterSubject(subjectId) {
        Registration.unregister(subjectId);
    }
</script>